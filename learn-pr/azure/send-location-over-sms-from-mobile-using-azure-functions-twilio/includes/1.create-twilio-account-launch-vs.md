В этом модуле вы создадите кроссплатформенное приложение Xamarin.Forms с бессерверной внутренней частью. Это приложение будет получать сведения о местоположении пользователей и их устройств и отправлять со списком телефонных номеров в функцию Azure. Затем функция будет использовать привязку к сторонней службе (Twilio) для отправки сведений о местоположении в SMS-сообщении на все указанные телефонные номера.

На следующей схеме показана используемая архитектура.

1. Приложение фиксирует ваше расположение с помощью Xamarin.Essentials в виде абстракции, используя зависящие от устройства API определения местоположения.
2. Сведения о местоположении и телефонные номера упаковываются в полезные данные JSON и отправляются в функцию Azure.
3. Функция Azure расшифровывает полезные данные JSON и создает SMS-сообщения.
4. SMS-сообщения отправляются через [Twilio](http://twilio.com).

![Схема архитектуры решения](../media/1-architecture.png)

## <a name="create-a-twilio-account"></a>Создание учетной записи Twilio

Для отправки SMS-сообщений из функции Azure требуется учетная запись Twilio. Чтобы приступить к работе, будет достаточно бесплатной учетной записи.

1. Перейдите на сайт [twilio.com](https://twilio.com).
2. В правом верхнем углу нажмите красную кнопку **Sign Up** (Зарегистрироваться).
3. Введите свои данные и нажмите кнопку **Get Started** (Приступить к работе).
4. Нужно будет подтвердить номер телефона. Бесплатные учетные записи Twilio позволяют отправлять сообщения только на проверенные телефонные номера, чтобы защитить их от спама. Twilio отправит вам код подтверждения, который необходимо ввести для проверки телефонного номера.
5. Укажите имя первого проекта, например "I'm here".
6. На панели мониторинга Twilio для обмена сообщениями в левой части щелкните значок **Панель мониторинга консоли** (со значком домашней страницы) и разверните панель **Сведения о проекте**. Запишите значения, указанные в полях **КОД БЕЗОПАСНОСТИ УЧЕТНОЙ ЗАПИСИ** и **МАРКЕР ПРОВЕРКИ ПОДЛИННОСТИ**, так как они понадобятся вам позже.

## <a name="launch-visual-studio"></a>Запустите Visual Studio.

Для выполнения этого модуля вы разработаете мобильное приложение и приложение функций Azure с помощью среды Visual Studio 2017, доступной на виртуальной машине. Несмотря на то, что приложения Xamarin.Forms можно создать для работы в ОС iOS, Android и на универсальной платформе Windows (UWP), в этом модуле будет рассматриваться только UWP, что позволит использовать лабораторную виртуальную машину. Все особенности, касающиеся других платформ, можно будет изучить по предоставленным ссылкам.

<!-- TODO - add HoL link button here -->

Если у вас уже есть установленная локально среда Visual Studio, выполняйте действия в этом модуле в этой локальной установке. При наличии правильной конфигурации установку можно запустить в ОС Android и iOS, а также на платформе UWP. Обратитесь к [документации по установке Xamarin](https://docs.microsoft.com/xamarin/cross-platform/get-started/installation/windows), чтобы убедиться в наличии требуемых рабочих нагрузок и пакетов SDK, и просмотрите [документацию по установке UWP](https://docs.microsoft.com/visualstudio/cross-platform/develop-apps-for-the-universal-windows-platform-uwp#requirements), чтобы проверить наличие нужного пакета SDK для UWP. Чтобы создавать проекты функций Azure, вам также потребуется установить рабочую нагрузку [Разработка для Azure](https://docs.microsoft.com/azure/azure-functions/functions-develop-vs#prerequisites).

Если вы хотите выполнять действия в этом модуле в macOS с помощью Visual Studio для Mac, вы не сможете создать проект UWP и вам придется изменить целевую платформу на IOS или Android. Инструкции по установке Visual Studio для Mac см. в [документации по Xamarin](https://docs.microsoft.com/visualstudio/cross-platform/setup-and-install#mac-setup-apple-id-xcode-and-xamarin). Действия, которые потребуется выполнить для создания и публикации приложения, могут отличаться от приведенных в этом модуле.

## <a name="summary"></a>Сводка

В этом блоке вы создали учетную записи Twilio для отправки SMS-сообщений и запустили Visual Studio. Далее вы узнаете, как создать приложение Xamarin.Forms и добавить пакет Xamarin.Essentials NuGet.