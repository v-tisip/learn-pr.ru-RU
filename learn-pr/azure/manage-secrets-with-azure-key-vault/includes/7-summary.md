<span data-ttu-id="39687-101">В этом модуле вы сохранили секретные данные конфигурации в Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="39687-101">In this module, you secured an app's secret configuration in Azure Key Vault.</span></span> <span data-ttu-id="39687-102">Код приложения проходит проверку подлинности в хранилище с помощью Управляемого удостоверения службы и автоматически загружает секреты из хранилища в систему конфигурации ASP.NET Core при запуске.</span><span class="sxs-lookup"><span data-stu-id="39687-102">Our app code authenticates to the vault with Managed Service Identity and automatically loads the secrets from the vault into ASP.NET Core's configuration system at startup.</span></span>

## <a name="cleanup"></a><span data-ttu-id="39687-103">Очистка</span><span class="sxs-lookup"><span data-stu-id="39687-103">Cleanup</span></span>

<span data-ttu-id="39687-104">Чтобы очистить подписку Azure, выполните в Azure Cloud Shell приведенную ниже команду. Она удаляет группу ресурсов, содержащую все созданные в этом модуле ресурсы.</span><span class="sxs-lookup"><span data-stu-id="39687-104">To clean up your Azure subscription, run the following in the Azure Cloud Shell to delete the resource group containing all the resources we created in this module.</span></span>

```console
az group delete --name keyvault-exercise-group
```

<span data-ttu-id="39687-105">Чтобы очистить хранилище Cloud Shell, удалите каталог `KeyVaultDemoApp`.</span><span class="sxs-lookup"><span data-stu-id="39687-105">To clean up your Cloud Shell storage, delete the `KeyVaultDemoApp` directory.</span></span>

## <a name="next-steps"></a><span data-ttu-id="39687-106">Дополнительная информация</span><span class="sxs-lookup"><span data-stu-id="39687-106">Next steps</span></span>

<span data-ttu-id="39687-107">Что нужно было бы сделать далее, если бы это было реальное приложение?</span><span class="sxs-lookup"><span data-stu-id="39687-107">If this was a real app, what would come next?</span></span>

* <span data-ttu-id="39687-108">Поместить все секреты приложения в хранилища!</span><span class="sxs-lookup"><span data-stu-id="39687-108">Put all your app secrets in your vaults!</span></span> <span data-ttu-id="39687-109">Оставлять их в файлах конфигурации больше нет смысла.</span><span class="sxs-lookup"><span data-stu-id="39687-109">There's no longer any reason to have them in configuration files.</span></span>
* <span data-ttu-id="39687-110">Продолжайте разрабатывать приложение.</span><span class="sxs-lookup"><span data-stu-id="39687-110">Continue to develop the application.</span></span> <span data-ttu-id="39687-111">Ваша рабочая среда полностью настроена, поэтому в будущем для развертывания в ней повторять все действия по настройке будет не нужно.</span><span class="sxs-lookup"><span data-stu-id="39687-111">Your production environment is all set up, so for future deployments to it you don't need to repeat all the setup.</span></span>
* <span data-ttu-id="39687-112">Чтобы упростить разработку, создайте хранилище в среде разработки, содержащее секреты с теми же именами, но другими значениями.</span><span class="sxs-lookup"><span data-stu-id="39687-112">To support development, create a development-environment vault that contains secrets with the same names but different values.</span></span> <span data-ttu-id="39687-113">Предоставьте разрешения разработчикам и настройте имя хранилища в файле конфигурации среды разработки приложения.</span><span class="sxs-lookup"><span data-stu-id="39687-113">Grant permissions to the development team and configure the vault name in the app's development-environment configuration file.</span></span> <span data-ttu-id="39687-114">Когда разработчики запускают приложение локально, `AddAzureKeyVault` автоматически находит локальные установки Visual Studio и Azure CLI и использует учетные данные Azure, настроенные в этих приложениях, для выполнения входа и доступа к хранилищу.</span><span class="sxs-lookup"><span data-stu-id="39687-114">When developers run the app locally, `AddAzureKeyVault` will automatically detect local installations of Visual Studio and the Azure CLI and use Azure credentials configured in those applications to sign in and access the vault.</span></span>
* <span data-ttu-id="39687-115">Создайте дополнительные среды в таких целях, как пользовательское приемочное тестирование.</span><span class="sxs-lookup"><span data-stu-id="39687-115">Create additional environments for purposes like user acceptance testing.</span></span>
* <span data-ttu-id="39687-116">Разделите хранилища, связанные с разными подписками и группами ресурсов, чтобы изолировать их.</span><span class="sxs-lookup"><span data-stu-id="39687-116">Separate vaults across different subscriptions and/or resource groups to isolate them.</span></span>
* <span data-ttu-id="39687-117">Предоставьте доступ к другим хранилищам сред соответствующим пользователям.</span><span class="sxs-lookup"><span data-stu-id="39687-117">Grant access to other environment vaults to the appropriate people.</span></span>

## <a name="further-reading"></a><span data-ttu-id="39687-118">Дополнительные материалы</span><span class="sxs-lookup"><span data-stu-id="39687-118">Further reading</span></span>

* [<span data-ttu-id="39687-119">Документация по Key Vault</span><span class="sxs-lookup"><span data-stu-id="39687-119">Key Vault documentation</span></span>](https://docs.microsoft.com/azure/key-vault/)
* [<span data-ttu-id="39687-120">Дополнительные сведения о методе AddAzureKeyVault и его дополнительных параметрах</span><span class="sxs-lookup"><span data-stu-id="39687-120">More about AddAzureKeyVault and its advanced options</span></span>](https://docs.microsoft.com/aspnet/core/security/key-vault-configuration?view=aspnetcore-2.1&tabs=aspnetcore2x)
* <span data-ttu-id="39687-121">В [этом руководстве](https://docs.microsoft.com/azure/key-vault/key-vault-use-from-web-application) приводятся пошаговые инструкции по использованию `KeyVaultClient`, включая прохождение проверки подлинности в Azure Active Directory вручную с помощью секрета клиента вместо MSI.</span><span class="sxs-lookup"><span data-stu-id="39687-121">[This tutorial](https://docs.microsoft.com/azure/key-vault/key-vault-use-from-web-application) walks through using `KeyVaultClient`, including manually authenticating it to Azure Active Directory using a client secret instead of MSI.</span></span>
* <span data-ttu-id="39687-122">[Документация по службе токенов MSI](https://docs.microsoft.com/azure/app-service/app-service-managed-service-identity#using-the-rest-protocol), позволяющая самостоятельно реализовать рабочий процесс проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="39687-122">[MSI token service documentation](https://docs.microsoft.com/azure/app-service/app-service-managed-service-identity#using-the-rest-protocol), for implementing the authentication workflow yourself</span></span>