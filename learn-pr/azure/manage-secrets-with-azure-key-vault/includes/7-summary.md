В этом модуле вы сохранили секретные данные конфигурации в Azure Key Vault. Код приложения проходит проверку подлинности в хранилище с помощью Управляемого удостоверения службы и автоматически загружает секреты из хранилища в систему конфигурации ASP.NET Core при запуске.

## <a name="cleanup"></a>Очистка

Чтобы очистить подписку Azure, выполните в Azure Cloud Shell приведенную ниже команду. Она удаляет группу ресурсов, содержащую все созданные в этом модуле ресурсы.

```console
az group delete --name keyvault-exercise-group
```

Чтобы очистить хранилище Cloud Shell, удалите каталог `KeyVaultDemoApp`.

## <a name="next-steps"></a>Дополнительная информация

Что нужно было бы сделать далее, если бы это было реальное приложение?

* Поместить все секреты приложения в хранилища! Оставлять их в файлах конфигурации больше нет смысла.
* Продолжайте разрабатывать приложение. Ваша рабочая среда полностью настроена, поэтому в будущем для развертывания в ней повторять все действия по настройке будет не нужно.
* Чтобы упростить разработку, создайте хранилище в среде разработки, содержащее секреты с теми же именами, но другими значениями. Предоставьте разрешения разработчикам и настройте имя хранилища в файле конфигурации среды разработки приложения. Когда разработчики запускают приложение локально, `AddAzureKeyVault` автоматически находит локальные установки Visual Studio и Azure CLI и использует учетные данные Azure, настроенные в этих приложениях, для выполнения входа и доступа к хранилищу.
* Создайте дополнительные среды в таких целях, как пользовательское приемочное тестирование.
* Разделите хранилища, связанные с разными подписками и группами ресурсов, чтобы изолировать их.
* Предоставьте доступ к другим хранилищам сред соответствующим пользователям.

## <a name="further-reading"></a>Дополнительные материалы

* [Документация по Key Vault](https://docs.microsoft.com/azure/key-vault/)
* [Дополнительные сведения о методе AddAzureKeyVault и его дополнительных параметрах](https://docs.microsoft.com/aspnet/core/security/key-vault-configuration?view=aspnetcore-2.1&tabs=aspnetcore2x)
* В [этом руководстве](https://docs.microsoft.com/azure/key-vault/key-vault-use-from-web-application) приводятся пошаговые инструкции по использованию `KeyVaultClient`, включая прохождение проверки подлинности в Azure Active Directory вручную с помощью секрета клиента вместо MSI.
* [Документация по службе токенов MSI](https://docs.microsoft.com/azure/app-service/app-service-managed-service-identity#using-the-rest-protocol), позволяющая самостоятельно реализовать рабочий процесс проверки подлинности