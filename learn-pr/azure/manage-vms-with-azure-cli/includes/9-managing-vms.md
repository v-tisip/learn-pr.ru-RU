Одна из основных задач при работе с виртуальными машинами — их запуск и остановка.

## <a name="stopping-a-vm"></a>Остановка виртуальной машины

Остановить работающую виртуальную машину можно с помощью команды `vm stop`. В ней необходимо передать имя и группу ресурсов или уникальный идентификатор виртуальной машины:

```azurecli
az vm stop -n SampleVM -g ExerciseResources
```

Чтобы проверить, остановлена ли виртуальная машина, можно попытаться проверить связь с общедоступным IP-адресом с помощью `ssh` или команды `vm get-instance-view`. Эта команда возвращает те же основные данные, что и `vm show`, но также предоставляет сведения о самом экземпляре. Чтобы узнать текущее состояние выполнения виртуальной машины, попробуйте ввести следующую команду в Azure Cloud Shell:

```azurecli
az vm get-instance-view -n SampleVM -g ExerciseResources --query "instanceView.statuses[?starts_with(code, 'PowerState/') == `true`].displayStatus" -o tsv
```

Она должна вернуть результат `VM stopped`.

## <a name="starting-a-vm"></a>Запуск виртуальной машины

Обратное можно сделать с помощью команды `vm start`.

```azurecli
az vm start -n SampleVM -g ExerciseResources
```

Она запускает остановленную виртуальную машину. Проверить состояние можно с помощью запроса `vm get-instance-view`, который теперь должен вернуть `VM running`.

## <a name="restarting-a-vm"></a>Перезапуск виртуальной машины

Наконец, мы можем перезапустить виртуальную машину, если были внесены изменения, требующие перезагрузки. Для этого используем команду `vm restart`. Если вы не хотите ждать, пока виртуальная машина перезагрузится, и хотите немедленно вернуть управление Azure CLI, можно добавить флаг `--no-wait`.

