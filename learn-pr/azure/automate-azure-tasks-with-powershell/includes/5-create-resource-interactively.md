Azure PowerShell позволяет писать команды и выполнять их немедленно. Это называется **интерактивным режимом**.

Вспомним, что общей целью в примере CRM является создание трех тестовых сред, содержащих виртуальные машины. Вы будете использовать группы ресурсов для размещения виртуальных машин в отдельных средах: в среде для модульного тестирования, в среде для тестирования интеграции и в среде для приемочного тестирования. Группу ресурсов необходимо создать только один раз, поэтому интерактивный режим PowerShell может быть хорошим решением.

В этом разделе приведено несколько примеров интерактивного использования PowerShell для входа в подписку Azure и создания групп ресурсов.

## <a name="what-are-powershell-cmdlets"></a>Что такое командлеты PowerShell?
Команда PowerShell называется **командлетом**. Командлет — это команда, которая управляет одной функцией. Термин **командлет** используется для обозначения небольшой команды. По соглашению авторам командлетов рекомендуется разрабатывать простые командлеты, предназначенные для выполнения одной задачи.

В состав базового продукта PowerShell входят командлеты, которые работают с такими функциями, как сеансы и фоновые задания. Добавьте модули в установку PowerShell, чтобы получить командлеты для управления другими функциями. Например, существуют сторонние модули для работы с FTP, администрирования операционной системы, доступа к файловой системе и т. д.

Для командлетов действует соглашение об именовании "глагол-существительное", например **Get-Process**, **Format-Table** и **Start-Service**. Кроме того, имеется соглашение по выбору команды: "get" — для получения данных, "set" — для вставки или обновления данных, "format" — для форматирования данных, "out" — для указания места назначения выходных данных и т. д.

Авторам командлетов рекомендуется добавлять файл справки для каждого командлета. Командлет **Get-Help** отображает файл справки для любого командлета:

```powershell
Get-Help <cmdlet-name> -detailed
```

## <a name="what-is-azurerm"></a>Что такое AzureRM?
**AzureRM** — это формальное имя модуля Azure PowerShell, содержащего командлеты для работы с функциями Azure (**RM** в имени означает **Resource Manager**). Он содержит сотни командлетов, которые позволяют управлять практически всеми аспектами каждого ресурса Azure. Вы можете работать с группами ресурсов, хранилищами, виртуальными машинами, Azure Active Directory, контейнерами, использовать машинное обучение и т. д.

## <a name="how-to-create-a-resource-group"></a>Создание группы ресурсов
Далее мы создадим группу ресурсов с помощью локальной установки Azure PowerShell. 

Этот процесс состоит из четырех этапов. 
1. Импорт командлетов Azure AD.
1. Подключение к подписке Azure.
1. Создание группы ресурсов.
1. Проверка успешного создания (см. ниже).

![Этапы создания ресурса в Azure с помощью Azure PowerShell](../media-drafts/5-create-resource-overview.png)

На каждом этапе используются разные командлеты.

### <a name="import"></a>Импорт
При запуске PowerShell по умолчанию загружает только основные командлеты. Это означает, что командлеты, необходимые для работы с Azure, не загружаются. Самый надежный способ загрузки нужных командлетов — импортировать их вручную в начале сеанса PowerShell.

Для загрузки модулей используется командлет **Import-Module**. У этого командлета много параметров, применяемых в различных ситуациях. Например, он может загружать несколько модулей, конкретную версию модуля, часть модуля и т. д. Чтобы загрузить один модуль полностью, применяется следующий простой синтаксис:

```powershell
Import-Module <module-name>
```

> [!TIP]
> Если вы часто работаете с Azure PowerShell, обратите внимание на два варианта автоматизации процесса загрузки модуля. Добавьте запись в профиль PowerShell для импорта модуля Azure во время запуска или используйте последние версии PowerShell, которые автоматически загружают модуль, при использовании командлета.

### <a name="connect"></a>Подключение
Так как вы работаете с локальной установкой Azure PowerShell, перед выполнением команд Azure вам потребуется пройти проверку подлинности. Командлет **Connect-AzureRmAccount** запрашивает учетные данные Azure, а затем подключается к вашей подписке Azure. У него много необязательных параметров, но если вам нужен только интерактивный запрос, никакие параметры не требуются:

```powershell
Connect-AzureRmAccount
```

### <a name="create"></a>Создание
Чтобы создать группу ресурсов, используйте командлет **New-AzureRmResourceGroup**. Необходимо указать имя и расположение. Имя должно быть уникальным в пределах вашей подписки. Расположение определяет место хранения метаданных для группы ресурсов (это может быть важно для обеспечения соответствия). Чтобы указать расположение, используйте такие строки, как "Западная часть США", "Северная Европа" или "Западная Индия". Как и у большинства командлетов Azure, у командлета **New-AzureRmResourceGroup** есть много необязательных параметров, однако используется следующий основной синтаксис:

```powershell
New-AzureRmResourceGroup -Name <name> -Location <location>
```

### <a name="verify"></a>Проверка
Командлет **Get-AzureRmResource** выводит список ресурсов Azure. Он полезен для проверки успешного создания группы ресурсов.

```powershell
Get-AzureRmResource
```

Чтобы получить более лаконичное представление, отправьте выходные данные командлета **Get-AzureRmResource** в командлет **Format-Table** с помощью вертикальной черты "|".

```powershell
Get-AzureRmResource | Format-Table
```

## <a name="summary"></a>Сводка
Интерактивный режим PowerShell подходит для выполнения разовых задач. В нашем примере мы будем использовать одну и ту же группу ресурсов в течение жизненного цикла проекта, а это значит, что ее целесообразно создать в интерактивном режиме. Интерактивный режим зачастую оказывается более оперативным и простым, чем написание сценария и его однократное выполнение.