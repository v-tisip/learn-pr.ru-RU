Предположим, вам нужно выбрать средство для администрирования ресурсов Azure, используемых для тестирования вашей системы управления отношениями с клиентами (CRM). Основными операциями будут создание групп ресурсов и подготовка виртуальных машин.

Вам требуется такое решение, которое легко могли бы освоить администраторы, но которое в то же время имеет достаточные возможности для автоматизации установки и настройки нескольких виртуальных машин или автоматизации всей среды приложений с помощью скриптов. Доступно множество таких средств. Вам же нужно выбрать из них то, которое лучше всего подходит для решения ваших задач.

## <a name="what-tools-are-available"></a>Какие средства доступны?
В Azure имеются три средства администрирования: 

1. портал Azure; 
2. Интерфейс командной строки Azure
3. Azure PowerShell

Они все дают примерно одинаковые возможности управления; задачу, которую можно выполнить с помощью одного из этих средств, скорее всего, можно выполнить и с помощью двух других. Все три средства являются кроссплатформенными: они поддерживаются в Windows, macOS и Linux. Различия заключаются в синтаксисе, требованиях к установке и поддержке автоматизации.

Ниже описываются все три решения и даются рекомендации по выбору наиболее подходящего из них. 

## <a name="what-is-the-azure-portal"></a>Что такое портал Azure?
Портал Azure — это веб-сайт, на котором можно создавать, настраивать и изменять ресурсы в подписке Azure. Портал предоставляет графический пользовательский интерфейс, в котором удобно находить нужные ресурсы и вносить изменения. Он также упрощает выполнение сложных административных задач с помощью мастеров и подсказок.

На портале нет возможностей для автоматизации повторяющихся задач. Например, чтобы настроить 15 виртуальных машин, необходимо создавать их по одной, каждый раз запуская мастер. В случае сложных задач это может занимать много времени и приводить к ошибкам. 

## <a name="what-is-the-azure-cli"></a>Что такое Azure CLI?
Azure CLI представляет собой кроссплатформенную программу командной строки, с помощью которой можно подключаться к Azure и выполнять команды для администрирования ресурсов Azure. Например, для создания виртуальной машины используется следующая команда:

```bash
az vm create \
  --resource-group CrmTestingResourceGroup \
  --name CrmUnitTests \
  --image UbuntuLTS
  ...
```

Интерфейс Azure CLI доступен двумя способами: его можно использовать в браузере посредством Azure Cloud Shell или установить локально на компьютере с ОС Linux, Mac или Windows. В обоих случаях его можно использовать интерактивно или с помощью скриптов. При интерактивном использовании вы сначала запускаете оболочку, например `cmd.exe` в Windows или Bash в Linux или macOS, а затем выполняете команду в командной строке. Чтобы автоматизировать повторяющиеся задачи, вы объединяете команды в скрипт, используя синтаксис выбранной оболочки, а затем выполняете его.

## <a name="what-is-azure-powershell"></a>Что такое Azure PowerShell?
Azure PowerShell — это модуль, который добавляется в Windows PowerShell или PowerShell Core и позволяет подключаться к подписке Azure и управлять ресурсами. Для работы Azure PowerShell требуется PowerShell. PowerShell предоставляет такие возможности, как окно оболочки, анализ команд и другие. Azure PowerShell добавляет команды, относящиеся к Azure.

Например, Azure PowerShell предоставляет команду **New-AzureRmVM**, которая создает виртуальную машину в подписке Azure. Чтобы использовать ее, необходимо запустить программу PowerShell, а затем выполнить следующую команду:

```powershell
New-AzureRmVm `
    -ResourceGroupName "CrmTestingResourceGroup" `
    -Name "CrmUnitTests" `
    -Image "UbuntuLTS"
    ...
```

Модуль Azure PowerShell также доступен двумя способами: его можно использовать в браузере посредством Azure Cloud Shell или установить локально на компьютере с ОС Linux, Mac или Windows. В обоих случаях можно выбрать один из двух режимов. Модуль можно использовать в интерактивном режиме, в котором вы вручную выполняете по одной команде, или в режиме скриптов, в котором запускаются скрипты, состоящие из нескольких команд.

## <a name="how-to-choose-an-administrative-tool"></a>Выбор средства администрирования
Портал, Azure CLI и Azure PowerShell приблизительно равноценны в плане того, какими объектами Azure можно управлять и какие конфигурации можно создавать с их помощью. Кроме того, все эти средства являются кроссплатформенными. Поэтому выбор обычно делается исходя из ряда других факторов.

- **Автоматизация**. Нужно ли вам автоматизировать сложные или повторяющиеся задачи? Azure PowerShell и Azure CLI поддерживают такую возможность, а портал нет.

- **Кривая изучения**. Требуется ли вам быстро выполнить задачу, не изучая новые команды или синтаксис? Портал Azure не требует осваивать синтаксис или запоминать команды. При работе с Azure PowerShell и Azure CLI необходимо знать все особенности синтаксиса каждой используемой команды.

- **Набор навыков команды**. Есть ли у вашей команды необходимая квалификация? Например, возможно, ее члены уже использовали PowerShell для управления Windows. Если так, они быстро овладеют Azure PowerShell.

## <a name="example"></a>Пример
Напомним, что вы выбираете средство администрирования с целью создания тестовых сред для приложения CRM. В Azure вашим администраторам необходимо выполнить две задачи:

1. создать по одной группе ресурсов для каждой категории тестирования (модульное, интеграционное и приемочное);
2. создать несколько виртуальных машин в каждой группе ресурсов перед каждым циклом тестирования.

Для создания групп ресурсов разумно будет выбрать портал Azure. Это разовая задача, поэтому создавать для нее скрипт не нужно.

Определить оптимальное средство для создания виртуальных машин труднее. Их нужно создать несколько, и делается это регулярно, например несколько раз в неделю. Это означает, что требуется автоматизация, поэтому портал Azure не лучший выбор. В этом случае потребности сможет удовлетворить Azure PowerShell или Azure CLI. Если у членов команды есть опыт работы с PowerShell, вероятно, оптимальным решением будет Azure PowerShell. Модуль Azure PowerShell доступен в операционных системах, которые используют ваши администраторы, поддерживает автоматизацию и будет прост в освоении.

## <a name="summary"></a>Сводка
Большинство администраторов начинают работу с Azure через портал. Он является хорошей отправной точкой, так как предоставляет хорошо организованный, понятный графический интерфейс, однако возможности автоматизации на нем ограничены. Если вам требуется автоматизация, в Azure предлагается два варианта: Azure PowerShell для администраторов с опытом работы с PowerShell и Azure CLI для всех остальных.

На практике в организациях обычно имеется сочетание разовых и повторяющихся задач. Поэтому часто портал используется в сочетании с решением для создания скриптов. В нашем примере CRM создавать группы ресурсов целесообразно на портале, а создание виртуальных машин автоматизировать с помощью PowerShell.

Далее в этом модуле рассматривается установка и использование Azure PowerShell.