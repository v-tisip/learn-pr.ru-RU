<span data-ttu-id="d9e7f-101">Многие приложения используют события для уведомления распределенных компонентов о каких-либо происшествиях или изменениях в каком-либо объекте.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-101">Many applications use events to notify distributed components that something happened or some object changed.</span></span> <span data-ttu-id="d9e7f-102">Для распределения событий через Azure можно использовать сетку событий.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-102">You can use Event Grid to make it easy to distribute those events through Azure.</span></span>

<span data-ttu-id="d9e7f-103">Предположим, у вас есть приложение для обмена музыкой с веб-API, который работает в Azure.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-103">Suppose you have a music-sharing application with a Web API that runs in Azure.</span></span> <span data-ttu-id="d9e7f-104">Когда какой-либо пользователь загружает новый звуковой файл, необходимо уведомить об этом все мобильные устройства, установленные на устройствах пользователей по всему миру.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-104">When a new sound file is uploaded by a user, you need to notify all the mobile apps installed on user devices around the world.</span></span>

<span data-ttu-id="d9e7f-105">Сделать это быстро и надежно можно с помощью подписок на сетку событий Azure.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-105">You can use subscriptions to Azure Event Grid to achieve this reliability and quickly.</span></span>

## <a name="what-is-event-grid"></a><span data-ttu-id="d9e7f-106">Что такое сетка событий?</span><span class="sxs-lookup"><span data-stu-id="d9e7f-106">What is Event Grid?</span></span>

<span data-ttu-id="d9e7f-107">Сетка событий Azure — это служба, которая распределяет события из источников, таких как учетные записи хранения BLOB-объектов Azure или службы мультимедиа, для подписчиков, такие как функции Azure или веб-перехватчики.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-107">Azure Event Grid is a service that distributes events from sources, such as Azure Blob Storage accounts or Media Services, to subscribers, such as Azure Functions or Web Hooks.</span></span>

<span data-ttu-id="d9e7f-108">Источник события — это любой компонент, который может создать событие.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-108">An event source is any component that can generate an event.</span></span> <span data-ttu-id="d9e7f-109">Например, пользователь может добавить новый медиафайл в учетную запись хранилища BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-109">For example, a user might add a new media file to a Blob Storage account.</span></span> <span data-ttu-id="d9e7f-110">При этом создается событие, которое сетка событий может распространить.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-110">This generates an event that Event Grid can distribute.</span></span>

<span data-ttu-id="d9e7f-111">Подписчик события — это любой компонент, который может получать события из сетки событий.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-111">An event subscriber is any component that can receive events from Event Grid.</span></span> <span data-ttu-id="d9e7f-112">Например, функция Azure может выполнить код в ответ на новый медиафайл в учетной записи хранилища BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-112">For example, an Azure Function can execute code that responds to the new media file in the Blob Storage account.</span></span>

<span data-ttu-id="d9e7f-113">Сетка событий упрощает подключение источников к нескольким подписчикам.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-113">Event grid makes it easy to connect sources to multiple subscribers.</span></span>

![Источники и подписчики сетки событий](../images/6-event-grid.png)

## <a name="event-sources"></a><span data-ttu-id="d9e7f-115">Источники событий</span><span class="sxs-lookup"><span data-stu-id="d9e7f-115">Event Sources</span></span>

<span data-ttu-id="d9e7f-116">События могут создаваться с использованием следующих типов ресурсов Azure:</span><span class="sxs-lookup"><span data-stu-id="d9e7f-116">Events can be generated by the following Azure resource types:</span></span>

- <span data-ttu-id="d9e7f-117">**Подписки и группы ресурсов Azure.**</span><span class="sxs-lookup"><span data-stu-id="d9e7f-117">**Azure Subscriptions and Resource Groups.**</span></span> <span data-ttu-id="d9e7f-118">Подписки и группы ресурсов создают события, связанные с операциями управления в Azure.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-118">Subscriptions and resource groups generate events related to management operations in Azure.</span></span> <span data-ttu-id="d9e7f-119">Например, этот источник создает событие, когда пользователь создает виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-119">For example, when a user creates a Virtual Machine (VM), this source generates an event.</span></span>
- <span data-ttu-id="d9e7f-120">**Учетные записи хранения.**</span><span class="sxs-lookup"><span data-stu-id="d9e7f-120">**Storage Accounts.**</span></span> <span data-ttu-id="d9e7f-121">Учетные записи хранения могут создавать события, когда пользователи добавляют BLOB-объекты, файлы, записи в таблице или очереди сообщений.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-121">Storage accounts can generate events when users add blobs, files, table entries, or queue messages.</span></span> <span data-ttu-id="d9e7f-122">И учетные записи BLOB-объектов, и учетные записи общего назначения можно использовать как источники событий.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-122">You can use both blob accounts and general purpose accounts as event sources.</span></span>
- <span data-ttu-id="d9e7f-123">**Службы мультимедиа.**</span><span class="sxs-lookup"><span data-stu-id="d9e7f-123">**Media Services.**</span></span> <span data-ttu-id="d9e7f-124">Службы мультимедиа содержат видео- и аудиофайлы и предоставляют расширенные функции управления медиафайлами.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-124">Media Services hosts video and audio media and provides advanced management features for media files.</span></span> <span data-ttu-id="d9e7f-125">Службы мультимедиа могут создавать события при запуске или по завершении кодирования видеофайла.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-125">Media Services can generate events when an encoding job is started or completed on a video file.</span></span>
- <span data-ttu-id="d9e7f-126">**Центр Интернета вещей.**</span><span class="sxs-lookup"><span data-stu-id="d9e7f-126">**IoT Hub.**</span></span> <span data-ttu-id="d9e7f-127">Центр Интернета вещей (IoT) Azure использует и собирает данные телеметрии с устройств Интернета вещей.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-127">The Azure Internet of Things (IoT) hub communicates with and gather telemetry from IoT devices.</span></span> <span data-ttu-id="d9e7f-128">Он может создавать события при получении таких сообщений.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-128">It can generate events whenever such communications arrive.</span></span>
- <span data-ttu-id="d9e7f-129">**Пользовательские события.**</span><span class="sxs-lookup"><span data-stu-id="d9e7f-129">**Custom Events.**</span></span> <span data-ttu-id="d9e7f-130">Пользовательские события могут создаваться с использованием API REST или пакета Azure SDK для Java, GO, .NET, Node, Python и Ruby.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-130">Custom events can be generated using the REST API or with the Azure SDK on Java, GO, .NET, Node, Python, and Ruby.</span></span> <span data-ttu-id="d9e7f-131">Например, можно задать создание пользовательского события в рабочей роли веб-приложения Azure, когда она извлекает сообщение из очереди хранилища.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-131">For example, you could create a custom event in an Azure Web App worker role when it picks up a message from a storage queue.</span></span>

<span data-ttu-id="d9e7f-132">Благодаря широкой интеграции с различными источниками событий в Azure сетки событий могут распределять события, связанные практически с любыми ресурсами Azure.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-132">This broad integration with diverse event sources within Azure ensures that Event Grids can distribute events that relate to almost any Azure resource.</span></span>

## <a name="topics"></a><span data-ttu-id="d9e7f-133">Разделы</span><span class="sxs-lookup"><span data-stu-id="d9e7f-133">Topics</span></span>

<span data-ttu-id="d9e7f-134">В сетке событий Azure разделом называется коллекция связанных событий.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-134">In Azure Event Grid, a topic is a collection of related events.</span></span> <span data-ttu-id="d9e7f-135">При публикации событий из источника можно решить, требуется ли этим событиям только один раздел или их нужно разбить на несколько разделов.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-135">When you publish events from a source, you decide whether those events need only a single topic or to be divided into multiple topics.</span></span> <span data-ttu-id="d9e7f-136">Компоненты, которые получают и обрабатывают события, подписываются на разделы, определяя, таким образом, какие события они будут получать.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-136">Components that receive and handle events subscribe to topics to determine the events they will receive.</span></span>

## <a name="subscriptions"></a><span data-ttu-id="d9e7f-137">Подписки</span><span class="sxs-lookup"><span data-stu-id="d9e7f-137">Subscriptions</span></span>

<span data-ttu-id="d9e7f-138">Обработчики событий используют подписки, чтобы сообщить сетке событий, какие события в разделе они хотят получать.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-138">Event handlers use subscriptions to tell Event Grid which events in a topic they want to receive.</span></span> <span data-ttu-id="d9e7f-139">Подписка также фиксирует конечную точку — это место, куда сетка событий отправляет уведомления о событиях.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-139">The subscription also fixes the endpoint - this is the location that Event Grid sends event notifications.</span></span> <span data-ttu-id="d9e7f-140">Кроме того, подписка может фильтровать события по типам или теме, чтобы обработчик событий получал только важные события.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-140">A subscription can also filter events by their type or by their subject so you can ensure an event handler only receives relevant events.</span></span>

## <a name="event-handlers"></a><span data-ttu-id="d9e7f-141">Обработчики событий</span><span class="sxs-lookup"><span data-stu-id="d9e7f-141">Event Handlers</span></span>

<span data-ttu-id="d9e7f-142">Получать и обрабатывать события из сетки событий могут следующие типы объектов в Azure:</span><span class="sxs-lookup"><span data-stu-id="d9e7f-142">The following object types in Azure can receive and handle events from Event Grid:</span></span>

- <span data-ttu-id="d9e7f-143">**Функции Azure.**</span><span class="sxs-lookup"><span data-stu-id="d9e7f-143">**Azure Functions.**</span></span> <span data-ttu-id="d9e7f-144">Функция Azure состоит из пользовательского кода, который выполняется в Azure без виртуального сервера или контейнера.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-144">An Azure Function consists of custom code that runs in Azure with no host virtual server or container.</span></span> <span data-ttu-id="d9e7f-145">Используйте функцию Azure как обработчик событий, если вам нужно написать код для пользовательского ответа на событие.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-145">Use an Azure Function as an event handler when you want to code a custom response to the event.</span></span>
- <span data-ttu-id="d9e7f-146">**Веб-перехватчики.**</span><span class="sxs-lookup"><span data-stu-id="d9e7f-146">**WebHooks.**</span></span> <span data-ttu-id="d9e7f-147">Веб-перехватчик — это веб-API, реализующий архитектуру push-уведомлений.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-147">A WebHook is Web API that implements a push architecture.</span></span>
- <span data-ttu-id="d9e7f-148">**Приложения логики.**</span><span class="sxs-lookup"><span data-stu-id="d9e7f-148">**Logic Apps.**</span></span> <span data-ttu-id="d9e7f-149">Приложение логики Azure размещает бизнес-процесс как рабочий.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-149">An Azure Logic App hosts a business process as a workflow.</span></span>
- <span data-ttu-id="d9e7f-150">**Microsoft Flow.**</span><span class="sxs-lookup"><span data-stu-id="d9e7f-150">**Microsoft Flow.**</span></span> <span data-ttu-id="d9e7f-151">В Microsoft Flow также размещаются рабочие процессы, но с ним легче работать нетехническому персоналу.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-151">Flow also hosts workflows but is easier for non-technical staff to use.</span></span>

## <a name="how-to-choose"></a><span data-ttu-id="d9e7f-152">Как выбрать</span><span class="sxs-lookup"><span data-stu-id="d9e7f-152">How to choose</span></span>

<span data-ttu-id="d9e7f-153">Использование сетки событий дает следующие преимущества:</span><span class="sxs-lookup"><span data-stu-id="d9e7f-153">Use Event Grid when you need these features:</span></span>

- <span data-ttu-id="d9e7f-154">**Простота.**</span><span class="sxs-lookup"><span data-stu-id="d9e7f-154">**Simplicity.**</span></span> <span data-ttu-id="d9e7f-155">Подключать источники к подписчикам в сетке событий очень просто.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-155">It is very easy to connect sources to subscribers in Event Grid.</span></span>
- <span data-ttu-id="d9e7f-156">**Расширенная фильтрация.**</span><span class="sxs-lookup"><span data-stu-id="d9e7f-156">**Advanced filtering.**</span></span> <span data-ttu-id="d9e7f-157">Подписки тщательно контролируют то, какие события они получают из раздела.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-157">Subscriptions have close control over the events they receive from a topic.</span></span>
- <span data-ttu-id="d9e7f-158">**Развертывание.** На одни и те же события и разделы можно подписать неограниченное количество конечных точек.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-158">**Fan-out.** You can subscribe an unlimited number of endpoints to the same events and topics.</span></span>
- <span data-ttu-id="d9e7f-159">**Надежность.** Сетка событий предпринимает повторные попытки доставки событий для каждой подписки в течение 24 часов.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-159">**Reliability** Event Grid retries event delivery for up to 24 hours for each subscription.</span></span>
- <span data-ttu-id="d9e7f-160">**Оплата за событие.** Оплата взымается только за то количество событий, которые вы передали.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-160">**Pay-per-event** Pay only for the number of events that you transmit.</span></span>

## <a name="summary"></a><span data-ttu-id="d9e7f-161">Сводка</span><span class="sxs-lookup"><span data-stu-id="d9e7f-161">Summary</span></span>

<span data-ttu-id="d9e7f-162">Сетка событий — это простая, но универсальная система распространения событий.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-162">Event Grid is a simple but versatile event distribution system.</span></span> <span data-ttu-id="d9e7f-163">Публикуйте с ее помощью события для подписчиков, которые будут получать эти события надежно и быстро.</span><span class="sxs-lookup"><span data-stu-id="d9e7f-163">Use it to publish events to subscribers, which will receive those events reliably and quickly.</span></span>