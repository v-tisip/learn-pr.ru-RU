<span data-ttu-id="92ca8-101">Некоторые приложения создают очень большое количество событий из многочисленных источников.</span><span class="sxs-lookup"><span data-stu-id="92ca8-101">There are certain applications that produce a massive number of events from almost as many sources.</span></span> <span data-ttu-id="92ca8-102">В таких случаях часто применяется термин "большие данные". Для обработки больших данных требуется особая инфраструктура.</span><span class="sxs-lookup"><span data-stu-id="92ca8-102">We often hear the term "Big Data" applied to these situations and they require unique infrastructure to handle them.</span></span>

<span data-ttu-id="92ca8-103">Предположим, вы работаете в компании Contoso, производящей авиадвигатели.</span><span class="sxs-lookup"><span data-stu-id="92ca8-103">Imagine you work for Contoso Aircraft Engines.</span></span> <span data-ttu-id="92ca8-104">Эти двигатели оснащаются сотнями датчиков.</span><span class="sxs-lookup"><span data-stu-id="92ca8-104">The engines your employer manufactures have hundreds of sensors.</span></span> <span data-ttu-id="92ca8-105">Перед вылетом самолета в рейс его двигатели подключаются к испытательному стенду и тщательно проверяются.</span><span class="sxs-lookup"><span data-stu-id="92ca8-105">Before an aircraft can be flown each morning, its engines are connected to a test harness and put through their paces.</span></span> <span data-ttu-id="92ca8-106">Кроме того, при подключении самолета к наземному оборудованию передаются кэшированные полетные данные.</span><span class="sxs-lookup"><span data-stu-id="92ca8-106">Additionally, cached in-flight data is streamed when the aircraft is connected to ground equipment.</span></span>

<span data-ttu-id="92ca8-107">Вам необходимо найти в записанных показаниях датчиков закономерности, которые указывают на возможность возникновения неисправности двигателя в ближайшем будущем.</span><span class="sxs-lookup"><span data-stu-id="92ca8-107">You want to use historic sensor data to find patterns in the sensor readings that indicate engine failure is likely to happen soon.</span></span> <span data-ttu-id="92ca8-108">Затем наличие таких закономерностей будет проверяться в показаниях датчиков, получаемых в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="92ca8-108">You want the real-time sensor readings to be compared against these failure patterns.</span></span> <span data-ttu-id="92ca8-109">Если показания двигателя вызывают беспокойство, пользователи получают предупреждение почти в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="92ca8-109">You can then warn users in near real time if an engine is showing worrisome readings.</span></span>

## <a name="what-is-azure-event-hubs"></a><span data-ttu-id="92ca8-110">Что такое Центры событий Azure</span><span class="sxs-lookup"><span data-stu-id="92ca8-110">What is Azure Event Hubs</span></span>

<span data-ttu-id="92ca8-111">Центр событий Azure выступает в роли посредника в схеме взаимодействия "публикация-подписка". В отличие от Сетки событий, он оптимизирован для очень высокой пропускной способности и большого числа издателей, а также обеспечивает высокий уровень безопасности и устойчивости.</span><span class="sxs-lookup"><span data-stu-id="92ca8-111">Azure Event Hub is an intermediary for the publish-subscribe communication pattern, but unlike Event Grid it is optimized for extremely high throughput, a large number of publishers, security, and resiliency.</span></span>

<span data-ttu-id="92ca8-112">В то время как Сетка событий почти идеально укладывается в схему "публикация-подписка", так как она просто управляет подписками и перенаправляет данные подписчикам, Центр событий выполняет достаточно много дополнительных задач. По этой причине он больше похож на служебную шину или очередь сообщений, чем на простое средство широковещательной рассылки сообщений.</span><span class="sxs-lookup"><span data-stu-id="92ca8-112">Whereas Event Grid fits more or less perfectly into the publish-subscribe pattern in that it simply manages subscriptions and routes communications to those subscribers, Event Hub performs quite a few additional services that in some ways make it resemble a service bus or message queue more than a simple event broadcaster.</span></span>

#### <a name="partitions"></a><span data-ttu-id="92ca8-113">Разделы</span><span class="sxs-lookup"><span data-stu-id="92ca8-113">Partitions</span></span> ####
<span data-ttu-id="92ca8-114">Получая данные, Центр событий распределяет их по секциям.</span><span class="sxs-lookup"><span data-stu-id="92ca8-114">As Event Hub receives communications it divides them into partitions.</span></span> <span data-ttu-id="92ca8-115">Секции — это буферы, в которых сохраняются переданные данные.</span><span class="sxs-lookup"><span data-stu-id="92ca8-115">Partitions are buffers into which the communications are saved.</span></span> <span data-ttu-id="92ca8-116">Из-за буферов события не являются полностью эфемерными. Событие не оказывается недоставленным только из-за того, что подписчик занят или недоступен.</span><span class="sxs-lookup"><span data-stu-id="92ca8-116">Because of the event buffers, events are not completely ephemeral and an event isn't missed just because a subscriber is busy or even offline.</span></span> <span data-ttu-id="92ca8-117">Подписчик всегда может обратиться к буферу, чтобы получить пропущенные события.</span><span class="sxs-lookup"><span data-stu-id="92ca8-117">The subscriber can always use the buffer to "catch up".</span></span> <span data-ttu-id="92ca8-118">По умолчанию события хранятся в буфере 24 часа, после чего их срок действия автоматически истекает.</span><span class="sxs-lookup"><span data-stu-id="92ca8-118">By default events stay in the buffer for 24 hours then automatically expire.</span></span>

<span data-ttu-id="92ca8-119">Буферы называются секциями, так как данные делятся между ними.</span><span class="sxs-lookup"><span data-stu-id="92ca8-119">The buffers are called partitions because the data is divided amongst them.</span></span> <span data-ttu-id="92ca8-120">Каждый Центр событий имеет по крайней мере две секции, а каждая секция имеет отдельный набор подписчиков.</span><span class="sxs-lookup"><span data-stu-id="92ca8-120">Every Event Hub has at least two partitions, and each partition has a separate set of subscribers.</span></span>

#### <a name="capture"></a><span data-ttu-id="92ca8-121">Регистрация</span><span class="sxs-lookup"><span data-stu-id="92ca8-121">Capture</span></span> ####
<span data-ttu-id="92ca8-122">Центр событий может немедленно отправлять все события в Azure Data Lake или хранилище BLOB-объектов, которые обеспечивают экономичное долгосрочное хранение.</span><span class="sxs-lookup"><span data-stu-id="92ca8-122">Event Hub can send all your events immediately to Azure Data Lake or Blob Storage for inexpensive permanent persistence.</span></span>

#### <a name="authentication"></a><span data-ttu-id="92ca8-123">Authentication</span><span class="sxs-lookup"><span data-stu-id="92ca8-123">Authentication</span></span> ####
<span data-ttu-id="92ca8-124">Все издатели проходят проверку подлинности и получают токен.</span><span class="sxs-lookup"><span data-stu-id="92ca8-124">All publishers are authenticated and issued a token.</span></span> <span data-ttu-id="92ca8-125">Это означает, что Центр событий может принимать события от внешних устройств и мобильных приложений без риска того, что злоумышленники смогут повлиять на анализ с помощью ложных данных.</span><span class="sxs-lookup"><span data-stu-id="92ca8-125">This means Event Hub can accept events from external devices and mobile apps without worrying that fraudulent data from pranksters could ruin our analysis.</span></span> 

## <a name="using-azure-event-hub"></a><span data-ttu-id="92ca8-126">Использование Центра событий Azure</span><span class="sxs-lookup"><span data-stu-id="92ca8-126">Using Azure Event Hub</span></span>

<span data-ttu-id="92ca8-127">Центры событий поддерживают передачу потоков событий по конвейеру в другие службы Azure.</span><span class="sxs-lookup"><span data-stu-id="92ca8-127">Event Hubs has support for pipelining event streams to other Azure services.</span></span> <span data-ttu-id="92ca8-128">Например, их использование со Stream Analytics позволяет проводить сложный анализ данных почти в реальном времени с возможностью сопоставлять множество событий и находить закономерности.</span><span class="sxs-lookup"><span data-stu-id="92ca8-128">Using it with Stream Analytics for instance allows complex analysis of data in near real time with the ability to correlate multiple events and look for patterns.</span></span> <span data-ttu-id="92ca8-129">В этом случае Stream Analytics считается подписчиком.</span><span class="sxs-lookup"><span data-stu-id="92ca8-129">In this case, Stream Analytics would be considered a subscriber.</span></span>

<span data-ttu-id="92ca8-130">В нашем примере мы настроим архитектуру так, чтобы Центры событий проверяли подлинность данных, получаемых от авиадвигателей.</span><span class="sxs-lookup"><span data-stu-id="92ca8-130">For our aircraft engines, we'll set up our architecture so that Event Hubs will authenticate the communications from our engines.</span></span> <span data-ttu-id="92ca8-131">Затем с помощью функции "Сбор" все данные будут сохраняться в Azure Data Lake. В дальнейшем с помощью этих данных можно будет переобучать и совершенствовать модели машинного обучения.</span><span class="sxs-lookup"><span data-stu-id="92ca8-131">We will then have it use Capture to save all the data to Azure Data Lake, later we can use all that data to retrain and improve our machine learning models.</span></span> <span data-ttu-id="92ca8-132">Наконец, потоки событий будут приниматься подписчиками Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="92ca8-132">Finally, our event streams will be picked up by Azure Stream Analytics subscribers.</span></span> <span data-ttu-id="92ca8-133">Служба Stream Analytics будет использовать модель машинного обучения для нахождения в показаниях датчиков закономерностей, которые могут указывать на проблемы.</span><span class="sxs-lookup"><span data-stu-id="92ca8-133">Stream Analytics will use our machine learning model to look for patterns in the sensor data that might indicate problems.</span></span>

<span data-ttu-id="92ca8-134">Так как у нас несколько секций и каждый двигатель отправляет данные только в одну из них, каждый экземпляр подписчика Stream Analytics обрабатывает только часть данных. Ему не требуется фильтровать и сопоставлять весь их объем.</span><span class="sxs-lookup"><span data-stu-id="92ca8-134">Because we have several partitions, and each engine sends all its data to only one partition each instance of our Stream Analytics subscriber only need deal with a subset of our overall data instead of filtering and correlating over all of it.</span></span>

## <a name="choose-event-grid-or-event-hub"></a><span data-ttu-id="92ca8-135">Выбор Сетки событий или Центра событий</span><span class="sxs-lookup"><span data-stu-id="92ca8-135">Choose Event Grid or Event Hub</span></span>

<span data-ttu-id="92ca8-136">Оба решения поддерживают семантику *по крайней мере один раз*.</span><span class="sxs-lookup"><span data-stu-id="92ca8-136">Both support *At Least Once* semantics.</span></span>

<span data-ttu-id="92ca8-137">Если вам нужна простая инфраструктура публикации событий и подписки на них с доверенными издателями (например, с собственным веб-сервером), следует выбрать сетку событий Azure.</span><span class="sxs-lookup"><span data-stu-id="92ca8-137">If you need a simple event publish-subscribe infrastructure with trusted publishers (for instance your own web server), you should choose Azure Event Grid.</span></span>

### <a name="consider-event-hub-if"></a><span data-ttu-id="92ca8-138">Используйте Центр событий в следующих случаях:</span><span class="sxs-lookup"><span data-stu-id="92ca8-138">Consider Event Hub if</span></span>
* <span data-ttu-id="92ca8-139">вам нужно поддерживать проверку подлинности большого количества издателей;</span><span class="sxs-lookup"><span data-stu-id="92ca8-139">You need to support authenticating a large number of publishers</span></span>
* <span data-ttu-id="92ca8-140">вам необходимо сохранять поток событий в Azure Data Lake или хранилище BLOB-объектов;</span><span class="sxs-lookup"><span data-stu-id="92ca8-140">You need to save a stream of events to Azure Data Lake or Blob Storage</span></span>
* <span data-ttu-id="92ca8-141">вам необходимо осуществлять агрегирование или анализ потока событий;</span><span class="sxs-lookup"><span data-stu-id="92ca8-141">You need aggregation or analytics on your event stream</span></span>
* <span data-ttu-id="92ca8-142">вам необходимо обеспечить надежный обмен сообщениями или устойчивость.</span><span class="sxs-lookup"><span data-stu-id="92ca8-142">You need reliable messaging or resiliency</span></span> 