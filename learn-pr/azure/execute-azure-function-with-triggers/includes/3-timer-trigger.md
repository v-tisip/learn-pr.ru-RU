Часто необходимо выполнять определенную логику через заданные интервалы времени. Представьте, что вы ведете блог и замечаете, что подписчики не читают ваши последние записи. Вы решаете, что лучше всего будет рассылать им раз в неделю напоминание по электронной почте. Вы реализуете эту логику с помощью функции Azure с триггером по таймеру, который вызывает функцию каждую неделю.

Здесь вы узнаете, как создать триггер по таймеру и настроить его активацию через фиксированные интервалы времени.

## <a name="what-is-a-timer-trigger"></a>Что такое триггер по таймеру

Триггер по таймеру — это триггер, выполняющий функцию через фиксированные интервалы времени. Чтобы создать триггер по таймеру, необходимо предоставить сведения для двух параметров. Во-первых, требуется *имя параметра метки времени*. Это просто идентификатор для доступа к триггеру в коде. Во-вторых, требуется *расписание*, которое представляет собой *выражение CRON*, задающее интервал таймера.

## <a name="what-is-a-cron-expression"></a>Что такое выражение CRON

*Выражение CRON* — это строка, состоящая из шести полей, которые представляют набор значений времени.

Порядок этих шести полей в Azure следующий: {секунда} {минута} {час} {день} {месяц} {день недели}.

Например, *выражение CRON* для создания триггера, активируемого каждые пять минут, будет следующим:

```
0 */5 * * * *
```

Поначалу эта строка может казаться непонятной. Мы вернемся к ней и подробно рассмотрим принципы ее построения, когда будем обсуждать *выражения CRON*.

Для создания *выражения CRON* необходимо иметь общее представление о некоторых специальных символах.

| Специальный символ | Значение | Пример |
| ------------- | ------------- | ------------- |
| *      | Выбирает все значения в поле | Звездочка "*" в поле дня недели означает *каждый* день. |
| ,      | Разделяет элементы в списке | Запятая "1,3" в поле дня недели означает только понедельники (день 1) и среды (день 3). |
| -      | Задает диапазон | Дефис "10-12" в поле часа означает диапазон с 10 до 12 часов. |
| /      | Задает шаг приращения | Косая черта "*/10" в поле минут означает шаг в 10 минут. |

Теперь вернемся к исходному примеру выражения CRON. Давайте попробуем разобрать его, разбив на отдельные поля.

```
0 */5 * * * *
```

**Первое поле** представляет секунды. Оно поддерживает значения от 0 до 59. Так как это поле содержит ноль, выбирается первое возможное значение, то есть одна секунда.

**Второе поле** представляет минуты. Значение "*/5" содержит два специальных символа. Первый, значок (*), означает выбор всех значений в поле. Так как это поле представляет минуты, возможные значения — от 0 до 59. Второй специальный символ — это косая черта (/), которая представляет шаг приращения. В сочетании эти символы означают выбор каждого пятого значения из всех возможных значений (0–59). Это можно выразить проще: "каждые пять минут".

**Остальные четыре поля** представляют час, день, месяц и день недели. Значки в этих полях означают выбор всех возможных значений. В этом примере мы выбираем "каждый час каждого дня каждого месяца".

В целом все выражение означает "в первую секунду каждой пятой минуты каждого часа каждого дня каждого месяца".

## <a name="how-to-create-a-timer-trigger"></a>Создание триггера по таймеру

Триггер по таймеру можно полностью создать на портале Azure. В функции Azure в списке стандартных типов триггеров выберите **триггер по таймеру**. Введите логику, которая должна выполняться. Укажите **Имя параметра метки времени** и **Выражение CRON**.

## <a name="summary"></a>Сводка

Триггер по таймеру вызывает функцию Azure по расписанию. Чтобы определить расписание для триггера по таймеру, следует создать *выражение CRON*. Это строка, которая представляет набор значений времени.

