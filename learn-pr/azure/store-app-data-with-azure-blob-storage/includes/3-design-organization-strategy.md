<span data-ttu-id="c971b-101">При разработке приложения, которое должно сохранить данные, важно подумать о том, каким образом оно будет упорядочивать и хранить данные в разных учетных записях хранения, контейнерах и BLOB-объектах.</span><span class="sxs-lookup"><span data-stu-id="c971b-101">When designing an app that needs to store data, it's important to think about how the app is going to organize and store data across storage accounts, containers, and blobs.</span></span>

## <a name="storage-accounts"></a><span data-ttu-id="c971b-102">учетные записи хранения;</span><span class="sxs-lookup"><span data-stu-id="c971b-102">Storage accounts</span></span>

<span data-ttu-id="c971b-103">Одной учетной записи достаточно для того, чтобы упорядочивать BLOB-объекты любым удобным образом, но для того, чтобы логически разделять траты и контролировать доступ к данным, следует использовать дополнительные учетные записи хранения.</span><span class="sxs-lookup"><span data-stu-id="c971b-103">A single storage account is flexible enough to organize your blobs however you like, but you should use additional storage accounts as necessary to logically separate costs and control access to data.</span></span>

## <a name="containers-and-blobs"></a><span data-ttu-id="c971b-104">контейнеры и большие двоичные объекты;</span><span class="sxs-lookup"><span data-stu-id="c971b-104">Containers and blobs</span></span>

<span data-ttu-id="c971b-105">Выбор стратегии для именования и упорядочивания контейнеров и BLOB-объектов должен зависеть от характера вашего приложения и данных, которые в нем хранятся.</span><span class="sxs-lookup"><span data-stu-id="c971b-105">The nature of your application and the data that it stores should drive your strategy for naming and organizing containers and blobs.</span></span>

<span data-ttu-id="c971b-106">Приложения, в которых BLOB-объекты используются в рамках схемы хранения, включающей базу данных, часто не требуют строгой организации, именования или метаданных, отражающих определенные сведения о данных приложения.</span><span class="sxs-lookup"><span data-stu-id="c971b-106">Apps using blobs as part of a storage scheme that includes a database often don't need to rely heavily on organization, naming, or metadata to indicate anything about their data.</span></span> <span data-ttu-id="c971b-107">Такие приложения часто используют в качестве имен BLOB-объектов идентификаторы, такие как идентификаторы GUID, и ссылаются на эти идентификаторы в записях базы данных.</span><span class="sxs-lookup"><span data-stu-id="c971b-107">Such apps commonly use identifiers like GUIDs as blob names and reference these identifiers in database records.</span></span> <span data-ttu-id="c971b-108">Для определения местонахождения BLOB-объектов и типа данных, которые в них содержатся, приложение будет использовать базу данных.</span><span class="sxs-lookup"><span data-stu-id="c971b-108">The app will use the database to determine where blobs are stored and the kind of data they contain.</span></span>

<span data-ttu-id="c971b-109">Другие приложения могут использовать хранилище BLOB-объектов Azure как систему персональных файлов, где имена контейнеров и BLOB-объектов служат для обозначения смысла и структуры.</span><span class="sxs-lookup"><span data-stu-id="c971b-109">Other apps may use Azure Blob storage more like a personal file system, where container and blob names are used to indicate meaning and structure.</span></span> <span data-ttu-id="c971b-110">Имена BLOB-объектов в таких приложениях часто будут выглядеть как имена традиционных файлов и включать расширения (например, `.jpg`), которые показывают, какого рода данные содержат эти файлы.</span><span class="sxs-lookup"><span data-stu-id="c971b-110">Blob names in these kinds of apps will often look like traditional file names and include file name extensions like `.jpg` to indicate what kind of data they contain.</span></span> <span data-ttu-id="c971b-111">Они будут применять виртуальные каталоги (см. ниже) для упорядочивания BLOB-объектов и часто использовать теги метаданных для хранения информации о BLOB-объектах и контейнерах.</span><span class="sxs-lookup"><span data-stu-id="c971b-111">They'll use virtual directories (see below) to organize blobs and will frequently use metadata tags to store information about blobs and containers.</span></span>

<span data-ttu-id="c971b-112">Выбирая способ упорядочивания и хранения BLOB-объектов и контейнеров, следует учитывать несколько важных моментов.</span><span class="sxs-lookup"><span data-stu-id="c971b-112">There are a few key things to consider when deciding how to organize and store blobs and containers.</span></span>

### <a name="naming-limitations"></a><span data-ttu-id="c971b-113">Ограничения именования</span><span class="sxs-lookup"><span data-stu-id="c971b-113">Naming limitations</span></span>

<span data-ttu-id="c971b-114">Имена контейнеров и BLOB-объектов должны соответствовать ряду правил, включая ограничения длины и запрет на специальные символы.</span><span class="sxs-lookup"><span data-stu-id="c971b-114">Container and blob names must conform to a set of rules, including length limitations and character restrictions.</span></span> <span data-ttu-id="c971b-115">Более подробные сведения о правилах именования см. в разделе "Дополнительные ресурсы" в конце этого модуля.</span><span class="sxs-lookup"><span data-stu-id="c971b-115">See the Additional Resources section at the end of this module for more specific information about naming rules.</span></span>

### <a name="public-access-and-containers-as-security-boundaries"></a><span data-ttu-id="c971b-116">Общий доступ и контейнеры как границы безопасности</span><span class="sxs-lookup"><span data-stu-id="c971b-116">Public access and containers as security boundaries</span></span>

<span data-ttu-id="c971b-117">По умолчанию для доступа ко всем BLOB-объектам требуется проверка подлинности.</span><span class="sxs-lookup"><span data-stu-id="c971b-117">By default, all blobs require authentication to access.</span></span> <span data-ttu-id="c971b-118">При этом отдельные контейнеры можно настроить так, чтобы BLOB-объекты из этих контейнеров можно было загружать в открытом доступе без проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="c971b-118">However, individual containers can be configured to allow public downloading of their blobs without authentication.</span></span> <span data-ttu-id="c971b-119">Эта функция поддерживает самые разные варианты применения, включая размещение статических ресурсов для веб-сайтов и совместное использование файлов.</span><span class="sxs-lookup"><span data-stu-id="c971b-119">This feature supports many use cases, such as hosting static website assets and sharing files.</span></span> <span data-ttu-id="c971b-120">Это связано с тем, что загрузка содержимого BLOB-объектов работает точно так же, как считывание любых других видов данных по сети: нужно только набрать URL-адрес BLOB-объекта в браузере или другой программе, способной отправлять запросы GET.</span><span class="sxs-lookup"><span data-stu-id="c971b-120">This is because downloading blob contents works the same way as reading any other kind of data over the web: you just point a browser or anything that can make a GET request at the blob URL.</span></span>

<span data-ttu-id="c971b-121">**Изображение общедоступного контейнера TODO с указанием URL-адреса прямого доступа**</span><span class="sxs-lookup"><span data-stu-id="c971b-121">**TODO public container image, showing direct access URL**</span></span>

<span data-ttu-id="c971b-122">Включение общего доступа важно для масштабируемости, поскольку данные, загружаемые непосредственно из хранилища BLOB-объектов, не генерируют в приложении трафик на стороне сервера.</span><span class="sxs-lookup"><span data-stu-id="c971b-122">Enabling public access is important for scalability because data downloaded directly from Blob storage doesn't generate any traffic in your server-side app.</span></span> <span data-ttu-id="c971b-123">Даже если преимущества открытого доступа вам не нужны или для управления доступом к данным через приложение вы будете использовать базу данных, планируйте использовать отдельные контейнеры для данных, которые должны будут находиться в открытом доступе.</span><span class="sxs-lookup"><span data-stu-id="c971b-123">Even if you don't immediately take advantage of public access or if you will use a database to control data access via your application, plan on using separate containers for data you want to be publicly available.</span></span>

> [!CAUTION]
> <span data-ttu-id="c971b-124">BLOB-объекты в контейнере, настроенном на открытый доступ, может загружать любой пользователь, знающий URL-адрес их хранения, без какой-либо проверки подлинности или аудита.</span><span class="sxs-lookup"><span data-stu-id="c971b-124">Blobs in a container configured for public access can be downloaded without any kind of authentication or auditing by anyone who knows their storage URLs.</span></span> <span data-ttu-id="c971b-125">Не размещайте в общедоступном контейнере BLOB-объекты, не предназначенные для открытого доступа.</span><span class="sxs-lookup"><span data-stu-id="c971b-125">Never put blob data in a public container that you don't intend to share publicly.</span></span>

<span data-ttu-id="c971b-126">Помимо открытого доступа, в Azure есть функция подписанного URL-адреса, позволяющая управлять детальными разрешениями для контейнеров.</span><span class="sxs-lookup"><span data-stu-id="c971b-126">In addition to public access, Azure has a shared access signature feature that allows fine-grained permissions control on containers.</span></span> <span data-ttu-id="c971b-127">Точный контроль доступа позволяет использовать сценарии, улучшающие масштабируемость, поэтому контейнеры можно в целом считать границами безопасности.</span><span class="sxs-lookup"><span data-stu-id="c971b-127">Precision access control enables scenarios that further improve scalability, so thinking about containers as security boundaries in general is a helpful guideline.</span></span>

### <a name="blob-name-prefixes-virtual-directories"></a><span data-ttu-id="c971b-128">Префиксы имен BLOB-объектов (виртуальные каталоги)</span><span class="sxs-lookup"><span data-stu-id="c971b-128">Blob name prefixes (virtual directories)</span></span>

<span data-ttu-id="c971b-129">Технически контейнеры "плоские" и не поддерживают никакие вложения или иерархии.</span><span class="sxs-lookup"><span data-stu-id="c971b-129">Technically, containers are "flat" and do not support any kind of nesting or hierarchy.</span></span> <span data-ttu-id="c971b-130">Однако, если присвоить BLOB-объектам иерархические имена, которые выглядят как пути к файлам (например, `finance/budgets/2017/q1.xls`), операция перечисления в API сможет фильтровать результаты по конкретным префиксам.</span><span class="sxs-lookup"><span data-stu-id="c971b-130">But if you give your blobs hierarchical names that look like file paths (such as `finance/budgets/2017/q1.xls`), the API's listing operation can filter results to specific prefixes.</span></span> <span data-ttu-id="c971b-131">Это позволит перемещаться по списку как по иерархической системе файлов и папок.</span><span class="sxs-lookup"><span data-stu-id="c971b-131">This allows you to navigate the list as if it was a hierarchical system of files and folders.</span></span>

<span data-ttu-id="c971b-132">Эту функцию часто называют *виртуальными каталогами*, поскольку с ее помощью некоторые средства и клиентские библиотеки визуализируют и перемещают хранилище BLOB-объектов так, как если бы оно было файловой системой.</span><span class="sxs-lookup"><span data-stu-id="c971b-132">This feature is often called *virtual directories* because some tools and client libraries use it to visualize and navigate Blob storage as if it was a file system.</span></span> <span data-ttu-id="c971b-133">Любое перемещение по папкам запускает отдельный вызов списка BLOB-объектов в этой папке.</span><span class="sxs-lookup"><span data-stu-id="c971b-133">Each folder navigation triggers a separate call to list the blobs in that folder.</span></span>

<span data-ttu-id="c971b-134">**Снимок экрана TODO: обозреватель хранилища и (или) портал с папками**</span><span class="sxs-lookup"><span data-stu-id="c971b-134">**TODO image of storage explorer and/or portal w/folders**</span></span>

<span data-ttu-id="c971b-135">Для упорядочивания сложных BLOB-объектов и перемещения между ними BLOB-объектам часто присваиваются имена, напоминающие имена файлов.</span><span class="sxs-lookup"><span data-stu-id="c971b-135">Using names that are like file names for blobs is a common technique for organizing and navigating complex blob data.</span></span>

### <a name="blob-types"></a><span data-ttu-id="c971b-136">Типы BLOB-объектов</span><span class="sxs-lookup"><span data-stu-id="c971b-136">Blob types</span></span>

<span data-ttu-id="c971b-137">Существуют три типа BLOB-объектов для хранения данных:</span><span class="sxs-lookup"><span data-stu-id="c971b-137">There are three different kinds of blobs you can store data in:</span></span>

- <span data-ttu-id="c971b-138">**Блочные BLOB-объекты** состоят из блоков разного размера, которые можно передавать и загружать по отдельности и параллельно.</span><span class="sxs-lookup"><span data-stu-id="c971b-138">**Block blobs** are composed of blocks of different sizes that can be uploaded and downloaded independently and in parallel.</span></span> <span data-ttu-id="c971b-139">Запись в блочный BLOB-объект включает передачу данных в блоки и отнесение данных к определенному BLOB-объекту &mdash; клиентские библиотеки делают это автоматически.</span><span class="sxs-lookup"><span data-stu-id="c971b-139">Writing to a block blob involves uploading data to blocks and committing them to the blob &mdash; client libraries will handle this for you.</span></span>
- <span data-ttu-id="c971b-140">**Добавочные BLOB-объекты** представляют собой специализированные блочные BLOB-объекты, которые поддерживают только добавление новых данных (обновление или удаление существующих данных не поддерживается), но делают это с высокой эффективностью.</span><span class="sxs-lookup"><span data-stu-id="c971b-140">**Append blobs** are specialized block blobs that support only appending new data (not updating or deleting existing data), but they're very efficient at it.</span></span> <span data-ttu-id="c971b-141">Добавочные BLOB-объекты идеально подходят для таких сценариев, как хранение журналов или потоковая передача данных.</span><span class="sxs-lookup"><span data-stu-id="c971b-141">Append blobs are great for scenarios like storing logs or streaming data.</span></span>
- <span data-ttu-id="c971b-142">**Страничные BLOB-объекты**  предназначены для сценариев, включающих операции чтения и записи с произвольным доступом.</span><span class="sxs-lookup"><span data-stu-id="c971b-142">**Page blobs** are designed for scenarios that involve random-access reads and writes.</span></span> <span data-ttu-id="c971b-143">Страничные BLOB-объекты применяются для хранения файлов виртуального жесткого диска (VHD), которые используются виртуальными машинами Azure, но отлично подходят и для любого сценария, включающего произвольный доступ.</span><span class="sxs-lookup"><span data-stu-id="c971b-143">Page blobs are used to store the virtual hard disk (VHD) files used by Azure Virtual Machines, but they're great for any scenario that involves random access.</span></span>

<span data-ttu-id="c971b-144">Блочные BLOB-объекты — оптимальный вариант для большинства сценариев, которые не требуют добавочных или страничных BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="c971b-144">Block blobs are the best choice for most scenarios that don't specifically call for append or page blobs.</span></span>