После знакомства с доступными вычислительными службами Azure мы рассмотрим каждую из них более подробно, чтобы понимать, в каких ситуациях их нужно использовать.

## <a name="azure-virtual-machines"></a>Виртуальные машины Azure

Если требуется полный контроль над операционной системой и средой, в этом случае идеальным вариантом будут виртуальные машины. Вы сможете настраивать все программное обеспечение, работающее на виртуальной машине, так же, как на физическом компьютере. Это оптимальное решение при использовании настраиваемого программного обеспечения или настраиваемых конфигураций размещения.

Кроме того, виртуальные машины прекрасно подходят при переходе с физического сервера в облако. Вы можете создать образ физического сервера и разместить его на виртуальной машине. При этом вы получаете полную свободу выбора операционных систем и сред выполнения приложений, а это значит, что разработку можно вести практически на любом языке и с помощью выбранных вами инструментов.

Однако вам придется обслуживать виртуальную машину. Вам потребуется обновлять ее операционную систему и программное обеспечение. 

Кроме того, вы будете учитывать ряд определенных факторов при масштабировании. Вы можете увеличить масштаб виртуальной машины, добавив дополнительные вычислительные ресурсы и память. Но если необходимо запустить несколько экземпляров одновременно, может потребоваться добавить дополнительные службы, такие как балансировщики нагрузки.

Представьте, что у вас запущен веб-сайт, на котором размещено приложение для розничного магазина. При создании дубликата виртуальной машины вам потребуется дополнительная служба для перенаправления запросов между несколькими экземплярами виртуальных машин веб-сайта.

В Azure также доступны расширенные службы для виртуальных машин.

* Для запуска постоянно доступных экземпляров одного приложения или наборов приложений на одинаково настроенных виртуальных машинах можно использовать **масштабируемые наборы виртуальных машин**. В этом случае происходит автоматическое создание тысяч идентичных виртуальных машин, загружаемых с приложением за считанные минуты, поэтому пользователям никогда не придется ждать. А поскольку предварительная подготовка виртуальных машин не требуется, вы используете только необходимые приложению вычислительные ресурсы.

* Возможны ситуации, в которых не обойтись без огромной вычислительной мощности или вычислительной мощности на уровне суперкомпьютера. **Пакетная служба** позволяет планировать выполнение заданий в масштабе облака и управлять вычислительными ресурсами с возможностью масштабирования до десятков, сотен или тысяч виртуальных машин. Можно даже настроить виртуальные машины с возможностями суперкомпьютера.

## <a name="azure-containers"></a>Контейнеры Azure

Контейнеры являются прекрасным вариантом, если нужно запустить несколько экземпляров приложения на одной виртуальной машине. При необходимости оркестратор контейнеров запускает, останавливает и масштабирует экземпляры приложения.

Однако обычно контейнеры применяются для создания решений, использующих архитектуру микрослужб. Контейнеры часто используются для разделения решения на более мелкие части. Например, веб-сайт можно разделить на контейнер для размещения интерфейсной части, на контейнер для размещения серверной части и на контейнер для хранилища. Это позволяет выделить части приложения в логические разделы с независимым обслуживанием, масштабируемостью и обновлением.

Допустим, объем серверной части веб-сайта достиг предельной емкости, но внешний интерфейс и хранилище не испытывают недостатка ресурсов. Чтобы повысить производительность сайта, вы можете добавить ресурсы только для серверной части. Или можно выбрать другую службу хранения. Либо можно заменить контейнер хранилища, не затрагивая остальную часть приложения.

 Если ваша команда уже знакома с использованием оркестрации контейнеров Kubernetes, обратите внимание на вариант со **службой Azure Kubernetes (AKS)**. Она упрощает и автоматизирует операции развертывания, функционирования оркестрации Kubernetes и управления ей.

## <a name="azure-functions"></a>Функции Azure

Функции Azure подходят в том случае, если для вас важен только код для службы, но не базовая платформа или инфраструктура. Как правило, они используются для выполнения действий в ответ на событие, часто с помощью запроса REST, таймера или сообщения из другой службы Azure, а также в ситуациях, предполагающих быстрое решение этой задачи, — в течение нескольких секунд или меньше.

Функции Azure масштабируется автоматически, поэтому они отлично подходят, если запросы постоянно меняются. Кроме того, плата взимается только при активации функции. Например, вы можете получать сообщения из решения Интернета вещей, используемого для отслеживания парка средств доставки. Скорее всего, максимальный объем данных будет поступать в рабочее время.

Функции Azure не учитывают состояние. Они работают так, как если бы перезапускались при каждом ответе на событие. Это поведение идеально подходит для обработки входящих данных. А если требуется отслеживание состояния, функции можно подключить к службе хранилища Azure.
